; ============================================================================
; PHP Tuning for Nextcloud on Raspberry Pi 5
; ============================================================================
; Loaded as /usr/local/etc/php/conf.d/zzz-pi-tuning.ini (zzz = loaded last)
; ============================================================================

; --- Memory ---
memory_limit = 512M

; --- Upload Limits (large video/audio files) ---
upload_max_filesize = 16G
post_max_size = 16G
max_input_time = 3600
max_execution_time = 3600

; --- OPcache (critical for Pi 5 performance) ---
opcache.enable = 1
opcache.interned_strings_buffer = 32
opcache.max_accelerated_files = 10000
opcache.memory_consumption = 128
opcache.save_comments = 1
opcache.revalidate_freq = 60
opcache.jit = 1255
opcache.jit_buffer_size = 128M

; --- Output buffering ---
output_buffering = Off

; --- APCu (user cache for Nextcloud) ---
apc.enable_cli = 1
apc.shm_size = 64M

; --- Realpath cache ---
realpath_cache_size = 512K
realpath_cache_ttl = 600
